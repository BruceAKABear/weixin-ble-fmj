{"version":3,"sources":["webpack:///C:/Users/bear/Documents/HBuilderProjects/ble-fmj/main.js","webpack:///C:/Users/bear/Documents/HBuilderProjects/ble-fmj/pages/order/order.vue?d890","webpack:///C:/Users/bear/Documents/HBuilderProjects/ble-fmj/pages/order/order.vue?4190","webpack:///C:/Users/bear/Documents/HBuilderProjects/ble-fmj/pages/order/order.vue?4da2","webpack:///C:/Users/bear/Documents/HBuilderProjects/ble-fmj/pages/order/order.vue?136e","webpack:///C:/Users/bear/Documents/HBuilderProjects/ble-fmj/pages/order/order.vue","webpack:///C:/Users/bear/Documents/HBuilderProjects/ble-fmj/pages/order/order.vue?0562","webpack:///C:/Users/bear/Documents/HBuilderProjects/ble-fmj/pages/order/order.vue?175c"],"names":["createPage","Page","data","checkV","defaultImg","youhuiCode","placeholder","cansubmit","canSubmitClass","canNotSubmitClass","methods","changeRadioV","oepnxieyi","uni","showModal","title","content","machObject","userProtocol","showCancel","success","res","confirm","gotoPay","that","phoneBlueToothCanUse","showToast","icon","mask","duration","bleConnectedStatus","writeServiceId","showLoading","startService","judgeBlueToothCanUse","commitOrderRequstNetWork","request","url","baseRequestUrl","method","orderFrom","userId","deviceImei","voucherCode","goodsInfo","JSON","stringify","commitGoodsArray","param","code","requestPayment","provider","timeStamp","nonceStr","package","prepayId","signType","paySign","sign","sysOrderId","chargeTimeOrder","order","length","writeBLECharacteristicValue","deviceId","serviceId","characteristicId","value","chargeIntervalTimmerId","setInterval","indexOf","responseOrder","clearInterval","clearTimeout","chargeTimeOutTimmerId","confirmOrder","closeBLEConnection","hideLoading","reLaunch","setTimeout","orderTime","Math","floor","i","console","log","substring","fail","err","error","message","notifyBLECharacteristicValueChange","state","notifyServiceId","checkOnlineOrder","intervalTimmerId","timoutTimmerId","sanAndConnectBle","startBluetoothDevicesDiscovery","stopBluetoothDevicesDiscovery","getBluetoothDevices","devicesArray","devices","deviceFound","name","deviceNamePrefix","setDeviceName","setDeviceId","connectBle","redirectTo","onBluetoothDeviceFound","getBLEDeviceServices","bluetoothServiceArray","services","uuid","toUpperCase","serviceIdPrefix","setServiceId","getBLEDeviceCharacteristics","characteristicArray","characteristics","notifyIdPrefix","setNotifyServiceId","writeIdPrefix","setWriteServiceId","createBLEConnection","errCode","computed","totalPrice","pric","goa","goodsObjectArray","singleProduc","product","goods","price","number","buttonMsg","onLoad"],"mappings":"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","file":"pages/order/order.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/order/order.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./order.vue?vue&type=template&id=47cb9227&\"\nimport script from \"./order.vue?vue&type=script&lang=js&\"\nexport * from \"./order.vue?vue&type=script&lang=js&\"\nimport style0 from \"./order.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\bear\\\\Desktop\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('47cb9227', component.options)\n    } else {\n      api.reload('47cb9227', component.options)\n    }\n    module.hot.accept(\"./order.vue?vue&type=template&id=47cb9227&\", function () {\n      api.rerender('47cb9227', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Documents/HBuilderProjects/ble-fmj/pages/order/order.vue\"\nexport default component.exports","export * from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order.vue?vue&type=template&id=47cb9227&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n\tString2Ab,\n\tAb2String\n} from '../../utils/index.js'\nimport {\n\tmapMutations,\n\tmapState\n} from 'vuex'\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tcheckV: true,\n\t\t\tdefaultImg: '../../static/chongdianqi.png',\n\t\t\tyouhuiCode: null,\n\t\t\tplaceholder: '兑换码不区分大小写',\n\t\t\tcansubmit: false,\n\t\t\tcanSubmitClass: 'submit-button',\n\t\t\tcanNotSubmitClass: 'can-not-submit'\n\n\t\t}\n\t},\n\tmethods: {\n\t\t...mapMutations([\n\t\t\t'setUserId', 'setDeviceId', 'setServiceId', 'setWriteServiceId', 'setNotifyServiceId', 'setCheckOnlineOrder',\n\t\t\t'setDeviceName', 'setDeviceImei'\n\t\t]),\n\t\tchangeRadioV() {\n\t\t\tthis.checkV = !this.checkV\n\t\t},\n\t\toepnxieyi() {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '用户协议',\n\t\t\t\tcontent: this.machObject.userProtocol,\n\t\t\t\tshowCancel: false,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.confirm) {}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t/**\n\t\t * 提交订单支付\n\t\t */\n\t\tgotoPay() {\n\t\t\tvar that = this\n\t\t\tif (that.cansubmit) {\n\t\t\t\tif (that.phoneBlueToothCanUse) {\n\t\t\t\t\t//需要同意用户协议\n\t\t\t\t\tif (!that.checkV) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '请同意用户协议',\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\tmask: true,\n\t\t\t\t\t\t\tduration: 1500\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\t//按钮不可点\n\t\t\t\t\tthat.cansubmit = false\n\t\t\t\t\tif (that.bleConnectedStatus && that.writeServiceId != '') {\n\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\ttitle: '加载中'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthat.startService()\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//蓝牙未连接，重新连接\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\tcontent: '设备连接中,请稍后重试',\n\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\tthat.cansubmit = true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthat.judgeBlueToothCanUse()\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * 提交订单，请求网络\n\t\t */\n\t\tcommitOrderRequstNetWork() {\n\t\t\tvar that = this\n\t\t\t//发起网络请求提交订单\n\t\t\tuni.request({\n\t\t\t\turl: that.baseRequestUrl + 'microProgramOrder/commitWeixinMicroOrder',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\torderFrom: 'wx_fmj',\n\t\t\t\t\tuserId: that.userId,\n\t\t\t\t\tdeviceImei: that.deviceImei,\n\t\t\t\t\tvoucherCode: that.youhuiCode,\n\t\t\t\t\tgoodsInfo: JSON.stringify(that.commitGoodsArray)\n\t\t\t\t},\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tlet param = res.data\n\t\t\t\t\tif (param.code === 1) {\n\t\t\t\t\t\tuni.requestPayment({\n\t\t\t\t\t\t\tprovider: 'wxpay',\n\t\t\t\t\t\t\ttimeStamp: param.timeStamp,\n\t\t\t\t\t\t\tnonceStr: param.nonceStr,\n\t\t\t\t\t\t\tpackage: 'prepay_id=' + param.prepayId,\n\t\t\t\t\t\t\tsignType: 'MD5',\n\t\t\t\t\t\t\tpaySign: param.sign,\n\t\t\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t\t\t//请求实际命令\n\t\t\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\t\t\turl: that.baseRequestUrl + 'order/getRealOrder?sysOrderId=' + param.sysOrderId,\n\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\tif (res.data.code === 1) {\n\t\t\t\t\t\t\t\t\t\t\tlet chargeTimeOrder = res.data.order\n\t\t\t\t\t\t\t\t\t\t\tif (chargeTimeOrder.length <= 40) {\n\t\t\t\t\t\t\t\t\t\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: that.serviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: that.writeServiceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: String2Ab(chargeTimeOrder),\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//监听响应的命令\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//定时判断是否相同\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar chargeIntervalTimmerId = setInterval(function() {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (chargeTimeOrder.indexOf(that.responseOrder) != -1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//设置在充电中\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclearInterval(chargeIntervalTimmerId)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclearTimeout(chargeTimeOutTimmerId)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//下发Q06=1@\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: that.serviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: that.writeServiceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: String2Ab(that.confirmOrder),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//关闭蓝牙连接\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.closeBLEConnection({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//跳转到充电页面\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../buyfinish/buyfinish'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}, 200)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t//定时判断,如果5秒以后还不对，那么就是伪造的直接推出\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar chargeTimeOutTimmerId = setTimeout(function() {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (chargeTimeOrder.indexOf(that.responseOrder) === -1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclearInterval(chargeIntervalTimmerId)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//关闭蓝牙连接\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontent: '蓝牙响应失败,请重新扫码',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}, 3000);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tlet orderTime = Math.floor(chargeTimeOrder.length / 40)\n\t\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i <= orderTime; i++) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('第' + i + '次的命令', chargeTimeOrder.substring(i * 40, (i+1)*40))\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tserviceId: that.serviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcharacteristicId: that.writeServiceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: String2Ab(chargeTimeOrder.substring(i * 40, (i+1)*40)),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//监听响应的命令\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//定时判断是否相同\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// var chargeIntervalTimmerId = setInterval(function() {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \tif (chargeTimeOrder.indexOf(that.responseOrder) != -1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//设置在充电中\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// clearInterval(chargeIntervalTimmerId)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// clearTimeout(chargeTimeOutTimmerId)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//下发Q06=1@\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// uni.writeBLECharacteristicValue({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \tserviceId: that.serviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \tcharacteristicId: that.writeServiceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \tvalue: String2Ab(that.confirmOrder),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \t\t//关闭蓝牙连接\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \t\tuni.closeBLEConnection({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \t\t\t\tconsole.log(res)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \t\t//跳转到充电页面\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \t\t\turl: '../buyfinish/buyfinish'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// })\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// }, 200)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//定时判断,如果5秒以后还不对，那么就是伪造的直接推出\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar chargeTimeOutTimmerId = setTimeout(function() {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (chargeTimeOrder.indexOf(that.responseOrder) === -1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//clearInterval(chargeIntervalTimmerId)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//关闭蓝牙连接\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontent: '蓝牙响应失败,请重新扫码',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}, 3000);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t//服务器响应失败\n\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\t\t\t\tcontent: '服务器开小差,请稍后重试',\n\t\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: function(err) {\n\t\t\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\t\t\tthat.cansubmit = true\n\t\t\t\t\t\t\t\t//支付失败的话跳转到首页\n\t\t\t\t\t\t\t\tconsole.error('支付失败' + JSON.stringify(err));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\tcontent: param.message,\n\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail(res) {\n\t\t\t\t\t//服务器响应失败\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\tcontent: '服务器开小差,请稍后重试',\n\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\n\t\t},\n\n\n\t\tstartService() {\n\t\t\tvar that = this\n\t\t\tuni.notifyBLECharacteristicValueChange({\n\t\t\t\tstate: true,\n\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\tserviceId: that.serviceId,\n\t\t\t\tcharacteristicId: that.notifyServiceId,\n\t\t\t\tsuccess(res) {\n\t\t\t\t\t// 下发在线命令\n\t\t\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\tserviceId: that.serviceId,\n\t\t\t\t\t\tcharacteristicId: that.writeServiceId,\n\t\t\t\t\t\tvalue: String2Ab(that.checkOnlineOrder),\n\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t//定时判断是否相同\n\t\t\t\t\t\t\tvar intervalTimmerId = setInterval(function() {\n\t\t\t\t\t\t\t\tif (that.checkOnlineOrder.indexOf(that.responseOrder) != -1) {\n\t\t\t\t\t\t\t\t\t//关闭蓝牙连接，以免创建多次连接系统级别会出问题\n\t\t\t\t\t\t\t\t\tclearInterval(intervalTimmerId)\n\t\t\t\t\t\t\t\t\tclearTimeout(timoutTimmerId)\n\t\t\t\t\t\t\t\t\t//提交订单\n\t\t\t\t\t\t\t\t\tthat.commitOrderRequstNetWork()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, 200)\n\t\t\t\t\t\t\t//定时判断,如果5秒以后还不对，那么就是伪造的直接推出\n\t\t\t\t\t\t\tvar timoutTimmerId = setTimeout(function() {\n\t\t\t\t\t\t\t\tif (that.checkOnlineOrder.indexOf(that.responseOrder) === -1) {\n\t\t\t\t\t\t\t\t\tclearInterval(intervalTimmerId)\n\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\t\tcontent: '蓝牙功能异常,请稍后重试',\n\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, 5000);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t},\n\t\t\t\tfail(res) {\n\t\t\t\t\tconsole.log('开启notify功能失败', res)\n\t\t\t\t}\n\t\t\t})\n\n\t\t},\n\n\n\t\t/**\n\t\t * 判断蓝牙是否可用,使用到了递归，只有开启蓝牙以后才进行蓝牙的初始化\n\t\t */\n\t\tjudgeBlueToothCanUse() {\n\t\t\tvar that = this\n\t\t\t//为了用户体验，延时1.5秒\n\t\t\tsetTimeout(function() {\n\t\t\t\tif (that.phoneBlueToothCanUse) {\n\t\t\t\t\t//搜索并连接蓝牙\n\t\t\t\t\tthat.sanAndConnectBle()\n\t\t\t\t} else {\n\t\t\t\t\t//手机蓝牙未打开\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\tcontent: '请开启手机蓝牙功能',\n\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\tthat.judgeBlueToothCanUse()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t}\n\t\t\t}, 1500);\n\t\t},\n\t\tsanAndConnectBle() {\n\t\t\tvar that = this\n\t\t\tuni.startBluetoothDevicesDiscovery({\n\t\t\t\t//开启蓝牙搜索服务\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tuni.stopBluetoothDevicesDiscovery({\n\t\t\t\t\t\t\tsuccess(res) {}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tuni.getBluetoothDevices({\n\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t//判断是否是自己的设备,只能通过name来判断\n\t\t\t\t\t\t\t\tvar devicesArray = res.devices\n\t\t\t\t\t\t\t\tvar deviceFound = false\n\t\t\t\t\t\t\t\tfor (let i = 0; i < devicesArray.length; i++) {\n\t\t\t\t\t\t\t\t\t//2.1 如果设备名不存在直接跳出继续下次判断\n\t\t\t\t\t\t\t\t\tif (!devicesArray[i].name) {\n\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t//2.2 查找自己的设备\n\t\t\t\t\t\t\t\t\tif (devicesArray[i].name.indexOf(that.deviceNamePrefix) != -1 && that.deviceImei.indexOf(devicesArray[\n\t\t\t\t\t\t\t\t\t\t\t\ti].name\n\t\t\t\t\t\t\t\t\t\t\t.substring(that.deviceNamePrefix.length)) != -1) {\n\t\t\t\t\t\t\t\t\t\tdeviceFound = true\n\t\t\t\t\t\t\t\t\t\tthat.setDeviceName(devicesArray[i].name)\n\t\t\t\t\t\t\t\t\t\t//2.3 封装实际的设备地址deviceId\n\t\t\t\t\t\t\t\t\t\tthat.setDeviceId(devicesArray[i].deviceId)\n\t\t\t\t\t\t\t\t\t\tthat.connectBle()\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif ((i === devicesArray.length - 1) && (!deviceFound)) {\n\t\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\t\t\tcontent: '未搜索到设备,请靠近设备后重试',\n\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}, 2000)\n\t\t\t\t\t//2. 会异步回调这个方法\n\t\t\t\t\tuni.onBluetoothDeviceFound((res) => {})\n\t\t\t\t},\n\t\t\t\tfail(res) {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\tcontent: '开启蓝牙搜索功能失败,请稍后重试',\n\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\n\t\t},\n\t\tconnectBle() {\n\t\t\tvar that = this\n\t\t\t//如果已经连接，那么久不创建连接了\n\t\t\tif (that.bleConnectedStatus) {\n\t\t\t\tuni.getBLEDeviceServices({\n\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tlet bluetoothServiceArray = res.services\n\t\t\t\t\t\tfor (let i = 0; i < bluetoothServiceArray.length; i++) {\n\t\t\t\t\t\t\tif (bluetoothServiceArray[i].uuid.toUpperCase().indexOf(that.serviceIdPrefix) != -1) {\n\t\t\t\t\t\t\t\tthat.setServiceId(bluetoothServiceArray[i].uuid)\n\t\t\t\t\t\t\t\tuni.getBLEDeviceCharacteristics({\n\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\tserviceId: that.serviceId,\n\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\tlet characteristicArray = res.characteristics\n\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < characteristicArray.length; i++) {\n\t\t\t\t\t\t\t\t\t\t\tif (characteristicArray[i].uuid.toUpperCase().indexOf(that.notifyIdPrefix) != -1) {\n\t\t\t\t\t\t\t\t\t\t\t\tthat.setNotifyServiceId(characteristicArray[i].uuid)\n\t\t\t\t\t\t\t\t\t\t\t} else if (characteristicArray[i].uuid.toUpperCase().indexOf(that.writeIdPrefix) != -\n\t\t\t\t\t\t\t\t\t\t\t\t1) {\n\t\t\t\t\t\t\t\t\t\t\t\tthat.setWriteServiceId(characteristicArray[i].uuid)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tthat.cansubmit = true\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tfail(res) {\n\t\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\t\t\tcontent: '读取蓝牙特征失败,请稍后重试',\n\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: (res) => {\n\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\tcontent: '读取蓝牙服务失败,请稍后重试',\n\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t} else {\n\t\t\t\tuni.createBLEConnection({\n\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t//查询所有蓝牙服务\n\t\t\t\t\t\tuni.getBLEDeviceServices({\n\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\tlet bluetoothServiceArray = res.services\n\t\t\t\t\t\t\t\tfor (let i = 0; i < bluetoothServiceArray.length; i++) {\n\t\t\t\t\t\t\t\t\tif (bluetoothServiceArray[i].uuid.toUpperCase().indexOf(that.serviceIdPrefix) != -1) {\n\t\t\t\t\t\t\t\t\t\tthat.setServiceId(bluetoothServiceArray[i].uuid)\n\t\t\t\t\t\t\t\t\t\tuni.getBLEDeviceCharacteristics({\n\t\t\t\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\t\t\t\tserviceId: that.serviceId,\n\t\t\t\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\t\t\t\tlet characteristicArray = res.characteristics\n\t\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < characteristicArray.length; i++) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (characteristicArray[i].uuid.toUpperCase().indexOf(that.notifyIdPrefix) != -1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat.setNotifyServiceId(characteristicArray[i].uuid)\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (characteristicArray[i].uuid.toUpperCase().indexOf(that.writeIdPrefix) != -\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat.setWriteServiceId(characteristicArray[i].uuid)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.cansubmit = true\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tfail(res) {\n\t\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontent: '读取蓝牙特征失败,请稍后重试',\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: (res) => {\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\tcontent: '读取蓝牙服务失败,请稍后重试',\n\t\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t},\n\t\t\t\t\tfail(res) {\n\t\t\t\t\t\t//处理10003\n\t\t\t\t\t\tif (res.errCode === 10003) {\n\t\t\t\t\t\t\t//1. 断连接\n\t\t\t\t\t\t\tuni.closeBLEConnection({\n\t\t\t\t\t\t\t\tdeviceId: that.deviceId,\n\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tthat.sanAndConnectBle()\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\tcontent: '蓝牙连接失败,请检查蓝牙后重试',\n\t\t\t\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\n\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t})\n\t\t\t}\n\n\t\t}\n\n\t},\n\tcomputed: {\n\t\t...mapState(['phoneBlueToothCanUse', 'baseRequestUrl', 'charging', 'deviceNamePrefix', 'notifyIdPrefix',\n\t\t\t'writeIdPrefix', 'serviceIdPrefix',\n\t\t\t'deviceImei', 'deviceName', 'deviceId',\n\t\t\t'serviceId', 'notifyServiceId', 'writeServiceId', 'bleConnectedStatus', 'responseOrder', 'checkOnlineOrder',\n\t\t\t'confirmOrder',\n\t\t\t'goodsObjectArray', 'commitGoodsArray', 'userId'\n\t\t]),\n\t\ttotalPrice() {\n\t\t\tlet pric = 0\n\t\t\tlet goa = this.goodsObjectArray\n\t\t\tfor (var i = 0; i < goa.length; i++) {\n\t\t\t\tlet singleProduc = goa[i]\n\t\t\t\tpric += singleProduc.product.goods.price * singleProduc.number\n\t\t\t}\n\t\t\treturn pric\n\t\t},\n\t\tbuttonMsg() {\n\t\t\treturn this.cansubmit ? '立即支付' : '订单加载中'\n\t\t}\n\t},\n\tonLoad() {\n\t\t//2.判断蓝牙是否可用\n\t\tthis.judgeBlueToothCanUse()\n\t}\n}\n","import mod from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../Desktop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}